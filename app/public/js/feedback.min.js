document.addEventListener("DOMContentLoaded", function () { const e = document.getElementById("problemButton"), t = document.getElementById("cancelButton"), n = document.getElementById("feedback-panel"), o = document.getElementById("thanksMessage"), c = document.querySelector(".govuk-heading-s"), d = document.getElementById("feedback-form"); e.addEventListener("click", function () { n.style.display = "block", e.style.display = "none", c.style.display = "none" }), t.addEventListener("click", function () { n.style.display = "none", e.style.display = "block", c.style.display = "block", o.hidden = !0 }), d.addEventListener("submit", function (t) { t.preventDefault(); const n = document.getElementById("feedback_form_input").value.trim(); "" === n ? alert("Please provide some feedback before submitting.") : l(n) }); function l(e) { fetch("/form-response/feedback", { method: "POST", headers: { "Content-Type": "application/json", "X-Requested-With": "XMLHttpRequest" }, body: JSON.stringify({ response: e }) }).then(e => { if (!e.ok) throw new Error(`HTTP error! Status: ${e.status}`); return e.json() }).then(e => { console.log("Success:", e), o.hidden = !1, n.style.display = "none", problemButton.style.display = "block", c.style.display = "block" }).catch(e => { console.error("Error:", e), alert(`Error submitting feedback: ${e.message}`) }) } });
